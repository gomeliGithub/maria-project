<div class="d-flex flex-column" id="controls">
    <div class="p-3" id="images" [attr.getFullCompressedImagesDataResult]="getFullCompressedImagesDataResult">
        <div id="listContainer">
            <table *ngIf="fullCompressedImagesListCount !== 0; else noContentBlock" class="table table-borderless table-hover">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Оригинальное имя</th>
                        <th scope="col">Размер оригинального изображения</th>
                        <th scope="col">Загружен</th>
                        <th scope="col">Отображён на главной</th>
                        <th scope="col">Отображён на галерее</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let compressedImage of fullCompressedImagesList; let i = index">
                        <th scope="row">{{i + 1}}</th>
                        <td>{{compressedImage.originalName}}</td>
                        <td>{{compressedImage.originalSize}}</td>
                        <td>{{compressedImage.uploadDate | date:"M/d/yy, h:mm a"}}</td>
                        <td class="fw-bold" [ngClass]="{ 
                            'text-success': compressedImage.displayedOnHomePage === 1, 
                            'text-danger': compressedImage.displayedOnHomePage === 0
                        }">
                            {{compressedImage.displayedOnHomePage | boolean}}
                        </td>
                        <td class="fw-bold" [ngClass]="{ 
                            'text-success': compressedImage.displayedOnGalleryPage === 1, 
                            'text-danger': compressedImage.displayedOnGalleryPage === 0
                        }">
                            {{compressedImage.displayedOnGalleryPage | boolean}}
                        </td>
                        <td>
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    Управление
                                </button>
                                <ul class="dropdown-menu border-0 bg-transparent">
                                    <li class="text-bg-danger rounded">
                                        <button class="dropdown-item btn btn-sm" type="button" [attr.originalImageName]="compressedImage.originalName" (click)="deleteImage($event)">
                                            Удалить
                                        </button>
                                    </li>
                                    <li *ngIf="compressedImage.displayedOnHomePage === 0" class="text-bg-warning rounded">
                                        <button class="dropdown-item btn btn-sm" type="button" [attr.originalImageName]="compressedImage.originalName" [attr.targetPage]="'home'" (click)="changeImageDisplayTarget($event)">
                                            На главную
                                        </button>
                                    </li>
                                    <li *ngIf="compressedImage.displayedOnGalleryPage === 0" class="text-bg-warning rounded">
                                        <button class="dropdown-item btn btn-sm" type="button" [attr.originalImageName]="compressedImage.originalName" [attr.targetPage]="'gallery'" (click)="changeImageDisplayTarget($event)">
                                            В галерею
                                        </button>
                                    </li>
                                    <li *ngIf="compressedImage.displayedOnHomePage === 1 || compressedImage.displayedOnGalleryPage === 1" class="text-bg-warning rounded">                            
                                        <button class="dropdown-item btn btn-sm" type="button" [attr.originalImageName]="compressedImage.originalName" [attr.targetPage]="'original'" (click)="changeImageDisplayTarget($event)">
                                            В архив
                                        </button>
                                    </li>
                                </ul>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <ng-template #noContentBlock>  
                <div class="noContentBlock text-center text-danger fs-4 p-4">
                    <span class="fw-bold">Загруженных изображений пока нет</span>
                </div>
            </ng-template>
        </div>
        <div id="uploadImageContainer">
            <div class="input-group">
                <input type="file" class="form-control" id="inputGroupUploadImage" aria-describedby="uploadImageButton" aria-label="Upload" (change)="fileChange($event)" #uploadImageInput>
                <button class="btn btn-outline-secondary" type="button" id="uploadImageButton" (click)="uploadImage()" [disabled]="!fileSelected">Загрузить новое изображение</button>
            </div>
        </div>
    </div>
    <div class="d-flex align-items-center visually-hidden" [ngClass]="{ 'visually-hidden': spinnerHidden }">
        <strong class="text-warning fs-4" role="status">{{ spinnerTitle }}</strong>
        <div class="spinner-border text-warning ms-auto" aria-hidden="true"></div>
    </div>
</div>
<ng-template #appModal></ng-template>