<div class="d-flex flex-column" id="controls">
    <div class="p-3" id="images" [attr.getFullCompressedImagesDataResult]="getFullCompressedImagesDataResult">
        <div class="table-responsive" id="listContainer">
            <table *ngIf="fullCompressedImagesListCount !== 0; else noContentBlock" class="table caption-top table-borderless table-hover text-center align-middle">
                <caption>{{ 'ADMINPANEL.TABLECAPTION' | translate }}</caption>
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">{{ 'ADMINPANEL.TABLECOLTITLES.ORIGINALNAME' | translate }}</th>
                        <th scope="col">{{ 'ADMINPANEL.TABLECOLTITLES.ORIGINALSIZE' | translate }}</th>
                        <th scope="col">{{ 'ADMINPANEL.TABLECOLTITLES.IMAGEEVENTTYPE' | translate }}</th>
                        <th scope="col">{{ 'ADMINPANEL.TABLECOLTITLES.VIEWSIZETYPE' | translate }}</th>
                        <th scope="col">{{ 'ADMINPANEL.TABLECOLTITLES.IMAGEEVENTDESCRIPTION' | translate }}</th>
                        <th scope="col">{{ 'ADMINPANEL.TABLECOLTITLES.UPLOADAT' | translate }}</th>
                        <th scope="col">{{ 'ADMINPANEL.TABLECOLTITLES.ONHOMEPAGE' | translate }}</th>
                        <th scope="col">{{ 'ADMINPANEL.TABLECOLTITLES.ONGALLERYPAGE' | translate }}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let compressedImage of fullCompressedImagesList; let i = index">
                        <th scope="row">{{ i + 1 }}</th>
                        <td>{{ compressedImage.originalName }}</td>
                        <td>{{ compressedImage.originalSize | imageSize }}</td>
                        <td [ngSwitch]="compressedImage.eventType">
                            <ng-template ngSwitchCase="wedding">{{ 'IMAGEEVENTTYPES.WEDDING' | translate }}</ng-template>
                            <ng-template ngSwitchCase="holiday">{{ 'IMAGEEVENTTYPES.HOLIDAY' | translate }}</ng-template>
                            <ng-template ngSwitchCase="birthday">{{ 'IMAGEEVENTTYPES.BIRTHDAY' | translate }}</ng-template>
                        </td>
                        <td [ngSwitch]="compressedImage.viewSizeType">
                            <ng-template ngSwitchCase="small">{{ 'IMAGEVIEWSIZETYPES.SMALL' | translate }}</ng-template>
                            <ng-template ngSwitchCase="medium">{{ 'IMAGEVIEWSIZETYPES.MEDIUM' | translate }}</ng-template>
                            <ng-template ngSwitchCase="big">{{ 'IMAGEVIEWSIZETYPES.BIG' | translate }}</ng-template>
                        </td>
                        <td>
                            <ng-template [ngIf]="compressedImage.description && compressedImage.description !== ''" [ngIfElse]="noTextIcon">
                                {{ compressedImage.description }}
                            </ng-template>
                            <ng-template #noTextIcon>
                                <i class="bi bi-dash-lg text-black"></i>
                            </ng-template>
                        </td>
                        <td>{{ compressedImage.uploadDate | date:"d/M/yy, H:mm" }}</td>
                        <td class="fw-bold" [ngClass]="{
                            'text-success': compressedImage.displayedOnHomePage === 1, 
                            'text-danger': compressedImage.displayedOnHomePage === 0
                        }">
                            {{ compressedImage.displayedOnHomePage | boolean }}
                        </td>
                        <td class="fw-bold" [ngClass]="{ 
                            'text-success': compressedImage.displayedOnGalleryPage === 1, 
                            'text-danger': compressedImage.displayedOnGalleryPage === 0
                        }">
                            {{ compressedImage.displayedOnGalleryPage | boolean }}
                        </td>
                        <td>
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    {{ 'ADMINPANEL.IMAGECONTROLTEXT.TITLE' | translate }}
                                </button>
                                <ul class="dropdown-menu border-0 bg-transparent">
                                    <li class="text-bg-secondary rounded">
                                        <button class="dropdown-item btn btn-sm" type="button" [attr.originalImageName]="compressedImage.originalName" (click)="changeImageFormActivate($event)">
                                            {{ 'ADMINPANEL.IMAGECONTROLTEXT.CHANGEBUTTON' | translate }}
                                        </button>
                                    </li>
                                    <li class="text-bg-danger rounded">
                                        <button class="dropdown-item btn btn-sm" type="button" [attr.originalImageName]="compressedImage.originalName" (click)="deleteImage($event)">
                                            {{ 'ADMINPANEL.IMAGECONTROLTEXT.DELETEBUTTON' | translate }}
                                        </button>
                                    </li>
                                    <li *ngIf="compressedImage.displayedOnHomePage === 0" class="text-bg-warning rounded">
                                        <button class="dropdown-item btn btn-sm" type="button" [attr.originalImageName]="compressedImage.originalName" [attr.targetPage]="'home'" (click)="changeImageDisplayTarget($event)">
                                            {{ 'ADMINPANEL.IMAGECONTROLTEXT.MOVETOHOMEPAGEBUTTON' | translate }}
                                        </button>
                                    </li>
                                    <li *ngIf="compressedImage.displayedOnGalleryPage === 0" class="text-bg-warning rounded">
                                        <button class="dropdown-item btn btn-sm" type="button" [attr.originalImageName]="compressedImage.originalName" [attr.targetPage]="'gallery'" (click)="changeImageDisplayTarget($event)">
                                            {{ 'ADMINPANEL.IMAGECONTROLTEXT.MOVETOGALLERYPAGEBUTTON' | translate }}
                                        </button>
                                    </li>
                                    <li *ngIf="compressedImage.displayedOnHomePage === 1 || compressedImage.displayedOnGalleryPage === 1" class="text-bg-warning rounded">                            
                                        <button class="dropdown-item btn btn-sm" type="button" [attr.originalImageName]="compressedImage.originalName" [attr.targetPage]="'original'" (click)="changeImageDisplayTarget($event)">
                                            {{ 'ADMINPANEL.IMAGECONTROLTEXT.MOVETOARCHIVEBUTTON' | translate }}
                                        </button>
                                    </li>
                                    <li class="text-bg-secondary rounded">
                                        <button class="dropdown-item btn btn-sm" type="button" [attr.originalImageName]="compressedImage.originalName" [attr.eventTypeName]="'wedding'" (click)="setEventTypeImage($event)">
                                            {{ 'ADMINPANEL.IMAGECONTROLTEXT.SETASWEDDINGEVENTTYPEIMAGEBUTTON' | translate }}
                                        </button>
                                    </li>
                                    <li class="text-bg-secondary rounded">
                                        <button class="dropdown-item btn btn-sm" type="button" [attr.originalImageName]="compressedImage.originalName" [attr.eventTypeName]="'holiday'" (click)="setEventTypeImage($event)">
                                            {{ 'ADMINPANEL.IMAGECONTROLTEXT.SETASHOLIDAYEVENTTYPEIMAGEBUTTON' | translate }}
                                        </button>
                                    </li>
                                    <li class="text-bg-secondary rounded">
                                        <button class="dropdown-item btn btn-sm" type="button" [attr.originalImageName]="compressedImage.originalName" [attr.eventTypeName]="'birthday'" (click)="setEventTypeImage($event)">
                                            {{ 'ADMINPANEL.IMAGECONTROLTEXT.SETASBIRTHDAYEVENTTYPEIMAGEBUTTON' | translate }}
                                        </button>
                                    </li>
                                </ul>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <ng-template #noContentBlock>  
                <div class="noContentBlock text-center text-danger fs-4 p-4">
                    <span class="fw-bold">{{ 'ADMINPANEL.NOIMAGESMESSAGE' | translate }}</span>
                </div>
            </ng-template>
        </div>
        <div class="d-flex flex-row justify-content-center" id="changeImageDataContainer" [ngClass]="{ 'visually-hidden': changeImageDataFormHidden }" #changeImageDataContainer>
            <form [formGroup]="changeImageDataForm" novalidate (submit)="changeImageData()">
                <div class="form-group form-floating mb-3">
                    <select class="form-control form-select" id="inputChangeEventType" formControlName="newImageEventType">
                        <option value="wedding" selected>{{ 'IMAGEEVENTTYPES.WEDDING' | translate }}</option>
                        <option value="holiday">{{ 'IMAGEEVENTTYPES.HOLIDAY' | translate }}</option>
                        <option value="birthday">{{ 'IMAGEEVENTTYPES.BIRTHDAY' | translate }}</option>
                    </select>
                    <label for="inputChangeEventType" class="form-label">{{ 'ADMINPANEL.CHANGEIMAGEDATATEXT.EVENTTYPE' | translate }}</label>
                </div>
                <div class="form-group form-floating mb-3">
                    <select class="form-control form-select" id="inputChangeViewSizeType" formControlName="newImageViewSizeType">
                        <option value="small" selected>{{ 'IMAGEVIEWSIZETYPES.SMALL' | translate }}</option>
                        <option value="medium">{{ 'IMAGEVIEWSIZETYPES.MEDIUM' | translate }}</option>
                        <option value="big">{{ 'IMAGEVIEWSIZETYPES.BIG' | translate }}</option>
                    </select>
                    <label for="inputChangeViewSizeType" class="form-label">{{ 'ADMINPANEL.CHANGEIMAGEDATATEXT.VIEWSIZETYPE' | translate }}</label>
                </div>
                <div class="form-group form-floating mb-3">
                    <input type="text" class="form-control" id="inputChangeImageDescription" formControlName="newImageDescription">
                    <label for="inputChangeImageDescription" class="form-label">{{ 'ADMINPANEL.CHANGEIMAGEDATATEXT.DESCRIPTION' | translate }}</label>
                </div>
                <div class="form-group text-center">
                    <button class="btn btn-secondary" [disabled]="changeImageDataForm.invalid">
                        {{ 'ADMINPANEL.CHANGEIMAGEDATATEXT.CHANGEBUTTON' | translate }}
                    </button>
                </div>
            </form>
        </div>
        <div class="d-flex align-items-center visually-hidden" [ngClass]="{ 'visually-hidden': spinnerHidden }">
            <strong class="text-info fs-4" role="status">{{ spinnerTitle }}</strong>
            <div class="spinner-border text-info ms-auto" aria-hidden="true"></div>
        </div>
        <div class="d-flex flex-row justify-content-center" id="uploadImageContainer">
            <form [formGroup]="uploadImageForm" class="p-3 w-50 border border-light border-3 rounded" novalidate (submit)="uploadImage()">
                <div class="form-group form-floating mb-3">
                    <select class="form-control form-select" id="inputEventType" formControlName="imageEventType">
                        <option value="wedding" selected>{{ 'IMAGEEVENTTYPES.WEDDING' | translate }}</option>
                        <option value="holiday">{{ 'IMAGEEVENTTYPES.HOLIDAY' | translate }}</option>
                        <option value="birthday">{{ 'IMAGEEVENTTYPES.BIRTHDAY' | translate }}</option>
                    </select>
                    <label for="inputEventType" class="form-label">{{ 'ADMINPANEL.UPLOADIMAGETEXT.EVENTTYPE' | translate }}</label>
                    <div class="alert alert-danger" *ngIf="uploadImageForm.controls['imageEventType'].invalid && uploadImageForm.controls['imageEventType'].touched">
                        {{ 'ADMINPANEL.UPLOADIMAGETEXT.INVALIDEVENTTYPE' | translate }}
                    </div>
                </div>
                <div class="form-group form-floating mb-3">
                    <select class="form-control form-select" id="inputViewSizeType" formControlName="imageViewSizeType">
                        <option value="small" selected>{{ 'IMAGEVIEWSIZETYPES.SMALL' | translate }}</option>
                        <option value="medium">{{ 'IMAGEVIEWSIZETYPES.MEDIUM' | translate }}</option>
                        <option value="big">{{ 'IMAGEVIEWSIZETYPES.BIG' | translate }}</option>
                    </select>
                    <label for="inputViewSizeType" class="form-label">{{ 'ADMINPANEL.UPLOADIMAGETEXT.VIEWSIZETYPE' | translate }}</label>
                    <div class="alert alert-danger" *ngIf="uploadImageForm.controls['imageViewSizeType'].invalid && uploadImageForm.controls['imageViewSizeType'].touched">
                        {{ 'ADMINPANEL.UPLOADIMAGETEXT.INVALIDVIEWSIZETYPE' | translate }}
                    </div>
                </div>
                <div class="form-group mb-3">
                    <input type="file" class="form-control" id="inputImage" (change)="fileChange($event)" formControlName="image">
                    <div class="alert alert-danger" *ngIf="uploadImageForm.controls['image'].invalid && uploadImageForm.controls['image'].touched">
                        {{ 'ADMINPANEL.UPLOADIMAGETEXT.INVALIDSELECTIMAGE' | translate }}
                    </div>
                </div>
                <div class="form-group form-floating mb-3">
                    <input type="text" class="form-control" id="inputImageDescription" formControlName="imageDescription">
                    <label for="inputImageDescription" class="form-label">{{ 'ADMINPANEL.UPLOADIMAGETEXT.DESCRIPTION' | translate }}</label>
                </div>
                <div class="form-group text-center">
                    <button class="btn btn-primary" [disabled]="uploadImageForm.invalid">
                        {{ 'ADMINPANEL.UPLOADIMAGETEXT.BUTTON' | translate }}
                    </button>
                </div>
            </form>
        </div>
        <div id="eventTypesImages">
            <div class="table-responsive">
                <table class="table caption-top table-borderless table-hover text-center align-middle">
                    <caption>{{ 'ADMINPANEL.SECONDTABLECAPTION' | translate }}</caption>
                    <thead>
                        <tr>
                            <th scope="col">{{ 'ADMINPANEL.TABLECOLTITLES.IMAGEEVENTTYPE' | translate }}</th>
                            <th scope="col">{{ 'ADMINPANEL.TABLECOLTITLES.IMAGEEVENTDESCRIPTION' | translate }}</th>
                            <th scope="col">{{ 'ADMINPANEL.TABLECOLTITLES.ORIGINALNAME' | translate }}</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let eventTypeData of eventTypes">
                            <td [ngSwitch]="eventTypeData.name">
                                <ng-template ngSwitchCase="wedding">{{ 'IMAGEEVENTTYPES.WEDDING' | translate }}</ng-template>
                                <ng-template ngSwitchCase="holiday">{{ 'IMAGEEVENTTYPES.HOLIDAY' | translate }}</ng-template>
                                <ng-template ngSwitchCase="birthday">{{ 'IMAGEEVENTTYPES.BIRTHDAY' | translate }}</ng-template>
                            </td>
                            <td>
                                <ng-template [ngIf]="eventTypeData.description && eventTypeData.description !== ''" [ngIfElse]="noTextIcon">
                                    {{ eventTypeData.description }}
                                </ng-template>
                                <ng-template #noTextIcon>
                                    <i class="bi bi-dash-lg text-black"></i>
                                </ng-template>
                            </td>
                            <td>
                                <ng-template [ngIf]="eventTypeData.originalImageName && eventTypeData.originalImageName !== ''" [ngIfElse]="noTextIcon">
                                    {{ eventTypeData.originalImageName }}
                                </ng-template>
                                <ng-template #noTextIcon>
                                    <i class="bi bi-dash-lg text-black"></i>
                                </ng-template>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<ng-template #appModal></ng-template>