<div class="table-responsive" id="listContainer">
    <table *ngIf="fullCompressedImagesListCount !== 0; else noContentBlock" class="table caption-top table-borderless table-hover text-center align-middle">
        <caption>{{ 'ADMINPANEL.TABLECAPTION' | translate }}</caption>
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">{{ 'ADMINPANEL.TABLECOLTITLES.ORIGINALNAME' | translate }}</th>
                <th scope="col">{{ 'ADMINPANEL.TABLECOLTITLES.ORIGINALSIZE' | translate }}</th>
                <th scope="col">{{ 'ADMINPANEL.TABLECOLTITLES.IMAGEPHOTOGRAPHYTYPE' | translate }}</th>
                <th scope="col">{{ 'ADMINPANEL.TABLECOLTITLES.VIEWSIZETYPE' | translate }}</th>
                <th scope="col">{{ 'ADMINPANEL.TABLECOLTITLES.IMAGEPHOTOGRAPHYTYPEDESCRIPTION' | translate }}</th>
                <th scope="col">{{ 'ADMINPANEL.TABLECOLTITLES.UPLOADAT' | translate }}</th>
                <th scope="col">{{ 'ADMINPANEL.TABLECOLTITLES.ONHOMEPAGE' | translate }}</th>
                <th scope="col">{{ 'ADMINPANEL.TABLECOLTITLES.ONGALLERYPAGE' | translate }}</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let compressedImage of fullCompressedImagesList; let i = index">
                <th scope="row">{{ i + 1 }}</th>
                <td>{{ compressedImage.originalName }}</td>
                <td>{{ compressedImage.originalSize | imageSize }}</td>
                <td [ngSwitch]="compressedImage.photographyType">
                    <ng-template ngSwitchCase="individual">{{ 'IMAGEPHOTOGRAPHYTYPES.INDIVIDUAL' | translate }}</ng-template>
                    <ng-template ngSwitchCase="children">{{ 'IMAGEPHOTOGRAPHYTYPES.CHILDREN' | translate }}</ng-template>
                    <ng-template ngSwitchCase="wedding">{{ 'IMAGEPHOTOGRAPHYTYPES.WEDDING' | translate }}</ng-template>
                    <ng-template ngSwitchCase="family">{{ 'IMAGEPHOTOGRAPHYTYPES.FAMILY' | translate }}</ng-template>
                    <ng-template ngSwitchCase="event">{{ 'IMAGEPHOTOGRAPHYTYPES.EVENT' | translate }}</ng-template>
                </td>
                <td [ngSwitch]="compressedImage.viewSizeType">
                    <ng-template ngSwitchCase="small">{{ 'IMAGEVIEWSIZETYPES.SMALL' | translate }}</ng-template>
                    <ng-template ngSwitchCase="medium">{{ 'IMAGEVIEWSIZETYPES.MEDIUM' | translate }}</ng-template>
                    <ng-template ngSwitchCase="big">{{ 'IMAGEVIEWSIZETYPES.BIG' | translate }}</ng-template>
                </td>
                <td>
                    <ng-template [ngIf]="compressedImage.description && compressedImage.description !== ''" [ngIfElse]="noTextIcon">
                        {{ compressedImage.description }}
                    </ng-template>
                    <ng-template #noTextIcon>
                        <i class="bi bi-dash-lg text-black"></i>
                    </ng-template>
                </td>
                <td>{{ compressedImage.uploadDate | date:"d/M/yy, H:mm" }}</td>
                <td class="fw-bold" [ngClass]="{
                    'text-success': compressedImage.displayedOnHomePage === 1, 
                    'text-danger': compressedImage.displayedOnHomePage === 0
                }">
                    {{ compressedImage.displayedOnHomePage | boolean }}
                </td>
                <td class="fw-bold" [ngClass]="{ 
                    'text-success': compressedImage.displayedOnGalleryPage === 1, 
                    'text-danger': compressedImage.displayedOnGalleryPage === 0
                }">
                    {{ compressedImage.displayedOnGalleryPage | boolean }}
                </td>
                <td>
                    <div class="" ngbDropdown display="dynamic">
                        <button class="btn btn-secondary" type="button" ngbDropdownToggle>
                            {{ 'ADMINPANEL.IMAGECONTROLTEXT.TITLE' | translate }}
                        </button>
                        <ul class="dropdown-menu border-0 bg-transparent" ngbDropdownMenu>
                            <li class="text-bg-secondary rounded">
                                <button class="btn btn-sm" type="button" [attr.originalImageName]="compressedImage.originalName" ngbDropdownItem 
                                    (click)="changeImageFormActivate($event)"
                                >
                                    {{ 'ADMINPANEL.IMAGECONTROLTEXT.CHANGEBUTTON' | translate }}
                                </button>
                            </li>
                            <li class="text-bg-danger rounded">
                                <button class="btn btn-sm" type="button" [attr.originalImageName]="compressedImage.originalName" ngbDropdownItem 
                                    (click)="deleteImage($event)"
                                >
                                    {{ 'ADMINPANEL.IMAGECONTROLTEXT.DELETEBUTTON' | translate }}
                                </button>
                            </li>
                            <li *ngIf="compressedImage.displayedOnHomePage === 0" class="text-bg-warning rounded">
                                <button class="btn btn-sm" type="button" [attr.originalImageName]="compressedImage.originalName" [attr.targetPage]="'home'" 
                                    ngbDropdownItem (click)="changeImageDisplayTarget($event)"
                                >
                                    {{ 'ADMINPANEL.IMAGECONTROLTEXT.MOVETOHOMEPAGEBUTTON' | translate }}
                                </button>
                            </li>
                            <li *ngIf="compressedImage.displayedOnGalleryPage === 0" class="text-bg-warning rounded">
                                <button class=" btn btn-sm" type="button" [attr.originalImageName]="compressedImage.originalName" [attr.targetPage]="'gallery'" 
                                    ngbDropdownItem (click)="changeImageDisplayTarget($event)"
                                >
                                    {{ 'ADMINPANEL.IMAGECONTROLTEXT.MOVETOGALLERYPAGEBUTTON' | translate }}
                                </button>
                            </li>
                            <li *ngIf="compressedImage.displayedOnHomePage === 1 || compressedImage.displayedOnGalleryPage === 1" class="text-bg-warning rounded">                            
                                <button class="btn btn-sm" type="button" [attr.originalImageName]="compressedImage.originalName" [attr.targetPage]="'original'" 
                                    ngbDropdownItem (click)="changeImageDisplayTarget($event)"
                                >
                                    {{ 'ADMINPANEL.IMAGECONTROLTEXT.MOVETOARCHIVEBUTTON' | translate }}
                                </button>
                            </li>
                            <li class="text-bg-secondary rounded">
                                <button class="btn btn-sm" type="button" [attr.originalImageName]="compressedImage.originalName" 
                                    [attr.imagePhotographyType]="'individual'" ngbDropdownItem (click)="setPhotographyTypeImage($event)"
                                >
                                    {{ 'ADMINPANEL.IMAGECONTROLTEXT.SETPHOTOGRAPHYTYPEIMAGE.INDIVIDUALBUTTONTEXT' | translate }}
                                </button>
                            </li>
                            <li class="text-bg-secondary rounded">
                                <button class="btn btn-sm" type="button" [attr.originalImageName]="compressedImage.originalName" 
                                    [attr.imagePhotographyType]="'children'" ngbDropdownItem (click)="setPhotographyTypeImage($event)"
                                >
                                    {{ 'ADMINPANEL.IMAGECONTROLTEXT.SETPHOTOGRAPHYTYPEIMAGE.CHILDRENBUTTONTEXT' | translate }}
                                </button>
                            </li>
                            <li class="text-bg-secondary rounded">
                                <button class="btn btn-sm" type="button" [attr.originalImageName]="compressedImage.originalName" 
                                    [attr.imagePhotographyType]="'wedding'" ngbDropdownItem (click)="setPhotographyTypeImage($event)"
                                >
                                    {{ 'ADMINPANEL.IMAGECONTROLTEXT.SETPHOTOGRAPHYTYPEIMAGE.WEDDINGBUTTONTEXT' | translate }}
                                </button>
                            </li>
                            <li class="text-bg-secondary rounded">
                                <button class="btn btn-sm" type="button" [attr.originalImageName]="compressedImage.originalName" 
                                    [attr.imagePhotographyType]="'family'" ngbDropdownItem (click)="setPhotographyTypeImage($event)"
                                >
                                    {{ 'ADMINPANEL.IMAGECONTROLTEXT.SETPHOTOGRAPHYTYPEIMAGE.FAMILYBUTTONTEXT' | translate }}
                                </button>
                            </li>
                            <li class="text-bg-secondary rounded">
                                <button class="btn btn-sm" type="button" [attr.originalImageName]="compressedImage.originalName" 
                                    [attr.imagePhotographyType]="'event'" ngbDropdownItem (click)="setPhotographyTypeImage($event)"
                                >
                                    {{ 'ADMINPANEL.IMAGECONTROLTEXT.SETPHOTOGRAPHYTYPEIMAGE.EVENTBUTTONTEXT' | translate }}
                                </button>
                            </li>
                        </ul>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <ng-template #noContentBlock>  
        <div class="noContentBlock text-center text-danger fs-4 p-4">
            <span class="fw-bold">{{ 'ADMINPANEL.NOIMAGESMESSAGE' | translate }}</span>
        </div>
    </ng-template>
</div>
<div class="d-flex flex-row justify-content-center" id="changeImageDataContainer" [ngClass]="{ 'visually-hidden': changeImageDataFormHidden }" #changeImageDataContainer>
    <form [formGroup]="changeImageDataForm" novalidate (submit)="changeImageData()">
        <div class="form-group form-floating mb-3">
            <select class="form-control form-select" id="inputChangePhotographyType" formControlName="newImagePhotographyType">
                <option value="individual" selected>{{ 'IMAGEPHOTOGRAPHYTYPES.INDIVIDUAL' | translate }}</option>
                <option value="children">{{ 'IMAGEPHOTOGRAPHYTYPES.CHILDREN' | translate }}</option>
                <option value="wedding">{{ 'IMAGEPHOTOGRAPHYTYPES.WEDDING' | translate }}</option>
                <option value="family">{{ 'IMAGEPHOTOGRAPHYTYPES.FAMILY' | translate }}</option>
                <option value="event">{{ 'IMAGEPHOTOGRAPHYTYPES.EVENT' | translate }}</option>
            </select>
            <label for="inputChangePhotographyType" class="form-label">{{ 'ADMINPANEL.CHANGEIMAGEDATATEXT.PHOTOGRAPHYTYPE' | translate }}</label>
        </div>
        <div class="form-group form-floating mb-3">
            <select class="form-control form-select" id="inputChangeViewSizeType" formControlName="newImageViewSizeType">
                <option value="small" selected>{{ 'IMAGEVIEWSIZETYPES.SMALL' | translate }}</option>
                <option value="medium">{{ 'IMAGEVIEWSIZETYPES.MEDIUM' | translate }}</option>
                <option value="big">{{ 'IMAGEVIEWSIZETYPES.BIG' | translate }}</option>
            </select>
            <label for="inputChangeViewSizeType" class="form-label">{{ 'ADMINPANEL.CHANGEIMAGEDATATEXT.VIEWSIZETYPE' | translate }}</label>
        </div>
        <div class="form-group form-floating mb-3">
            <input type="text" class="form-control" id="inputChangeImageDescription" formControlName="newImageDescription">
            <label for="inputChangeImageDescription" class="form-label">{{ 'ADMINPANEL.CHANGEIMAGEDATATEXT.DESCRIPTION' | translate }}</label>
        </div>
        <div class="form-group text-center">
            <button class="btn btn-secondary" [disabled]="changeImageDataForm.invalid">
                {{ 'ADMINPANEL.CHANGEIMAGEDATATEXT.CHANGEBUTTON' | translate }}
            </button>
        </div>
    </form>
</div>
<div class="d-flex align-items-center visually-hidden" [ngClass]="{ 'visually-hidden': spinnerHidden }">
    <strong class="text-info fs-4" role="status">{{ 'SPINNERTITLES.PROCESSING' | translate }}</strong>
    <div class="spinner-border text-info ms-auto" aria-hidden="true"></div>
</div>
<ngb-accordion class="align-self-center my-4 w-50" id="uploadImageAccordion">
    <ngb-panel [title]="'ADMINPANEL.UPLOADIMAGETEXT.BUTTON' | translate">
        <ng-template ngbPanelContent>

            <form [formGroup]="uploadImageForm" class="" novalidate (submit)="uploadImage()">
                <div class="form-group form-floating mb-3">
                    <select class="form-control form-select" id="inputPhotographyType" formControlName="imagePhotographyType">
                        <option value="individual" selected>{{ 'IMAGEPHOTOGRAPHYTYPES.INDIVIDUAL' | translate }}</option>
                        <option value="children">{{ 'IMAGEPHOTOGRAPHYTYPES.CHILDREN' | translate }}</option>
                        <option value="wedding">{{ 'IMAGEPHOTOGRAPHYTYPES.WEDDING' | translate }}</option>
                        <option value="family">{{ 'IMAGEPHOTOGRAPHYTYPES.FAMILY' | translate }}</option>
                        <option value="event">{{ 'IMAGEPHOTOGRAPHYTYPES.EVENT' | translate }}</option>
                    </select>
                    <label for="inputPhotographyType" class="form-label">{{ 'ADMINPANEL.UPLOADIMAGETEXT.PHOTOGRAPHYTYPE' | translate }}</label>
                    <div class="alert alert-danger" *ngIf="uploadImageForm.controls['imagePhotographyType'].invalid && uploadImageForm.controls['imagePhotographyType'].touched">
                            {{ 'ADMINPANEL.UPLOADIMAGETEXT.INVALIDPHOTOGRAPHYTYPE' | translate }}
                    </div>
                </div>
                <div class="form-group form-floating mb-3">
                    <select class="form-control form-select" id="inputViewSizeType" formControlName="imageViewSizeType">
                        <option value="small" selected>{{ 'IMAGEVIEWSIZETYPES.SMALL' | translate }}</option>
                        <option value="medium">{{ 'IMAGEVIEWSIZETYPES.MEDIUM' | translate }}</option>
                        <option value="big">{{ 'IMAGEVIEWSIZETYPES.BIG' | translate }}</option>
                    </select>
                    <label for="inputViewSizeType" class="form-label">{{ 'ADMINPANEL.UPLOADIMAGETEXT.VIEWSIZETYPE' | translate }}</label>
                    <div class="alert alert-danger" *ngIf="uploadImageForm.controls['imageViewSizeType'].invalid && uploadImageForm.controls['imageViewSizeType'].touched">
                        {{ 'ADMINPANEL.UPLOADIMAGETEXT.INVALIDVIEWSIZETYPE' | translate }}
                    </div>
                </div>
                <div class="form-group mb-3">
                    <input type="file" class="form-control" id="inputImage" (change)="fileChange($event)" formControlName="image">
                    <div class="alert alert-danger" *ngIf="uploadImageForm.controls['image'].invalid && uploadImageForm.controls['image'].touched">
                        {{ 'ADMINPANEL.UPLOADIMAGETEXT.INVALIDSELECTIMAGE' | translate }}
                    </div>
                </div>
                <div class="form-group form-floating mb-3">
                    <input type="text" class="form-control" id="inputImageDescription" formControlName="imageDescription">
                    <label for="inputImageDescription" class="form-label">{{ 'ADMINPANEL.UPLOADIMAGETEXT.DESCRIPTION' | translate }}</label>
                </div>
                <div class="form-group text-center">
                    <button class="btn btn-primary" [disabled]="uploadImageForm.invalid">
                        {{ 'ADMINPANEL.UPLOADIMAGETEXT.BUTTON' | translate }}
                    </button>
                </div>
            </form>
        </ng-template>
    </ngb-panel>
</ngb-accordion>
<div *ngIf="imagePhotographyTypes && imagePhotographyTypes.length !== 0" id="photographyTypesImages">
    <div class="table-responsive">
        <table class="table caption-top table-borderless table-hover text-center align-middle">
            <caption>{{ 'ADMINPANEL.SECONDTABLECAPTION' | translate }}</caption>
            <thead>
                <tr>
                    <th scope="col">{{ 'ADMINPANEL.TABLECOLTITLES.IMAGEPHOTOGRAPHYTYPE' | translate }}</th>
                    <th scope="col">{{ 'ADMINPANEL.TABLECOLTITLES.IMAGEPHOTOGRAPHYTYPEDESCRIPTION' | translate }}</th>
                    <th scope="col">{{ 'ADMINPANEL.TABLECOLTITLES.IMAGEPHOTOGRAPHYTYPECOMPRESSEDIMAGENAME' | translate }}</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let imagePhotographyTypeData of imagePhotographyTypes">
                    <td [ngSwitch]="imagePhotographyTypeData.name">
                        <ng-template ngSwitchCase="individual">{{ 'IMAGEPHOTOGRAPHYTYPES.INDIVIDUAL' | translate }}</ng-template>
                        <ng-template ngSwitchCase="children">{{ 'IMAGEPHOTOGRAPHYTYPES.CHILDREN' | translate }}</ng-template>
                        <ng-template ngSwitchCase="wedding">{{ 'IMAGEPHOTOGRAPHYTYPES.WEDDING' | translate }}</ng-template>
                        <ng-template ngSwitchCase="family">{{ 'IMAGEPHOTOGRAPHYTYPES.FAMILY' | translate }}</ng-template>
                        <ng-template ngSwitchCase="event">{{ 'IMAGEPHOTOGRAPHYTYPES.EVENT' | translate }}</ng-template>
                    </td>
                    <td>
                        <ngb-accordion class="imagePhotographyTypeDescriptionAccordion">
                            <ngb-panel class="">
                                <ng-template ngbPanelContent>
                                    <textarea class="form-control" [value]="imagePhotographyTypeData.description"
                                        [attr.photography-type-name]="imagePhotographyTypeData.name" #imagePhotographyTypeDescription
                                    >
                                        {{ imagePhotographyTypeData.description }}
                                    </textarea>
                                </ng-template>
                             </ngb-panel>
                        </ngb-accordion>
                    </td>
                    <td>
                        <ng-template [ngIf]="imagePhotographyTypeData.compressedImageName && imagePhotographyTypeData.compressedImageName !== ''" [ngIfElse]="noTextIcon">
                            {{ imagePhotographyTypeData.compressedImageName }}
                        </ng-template>
                        <ng-template #noTextIcon>
                            <i class="bi bi-dash-lg text-black"></i>
                        </ng-template>
                    </td>
                    <td>
                        <button class="btn btn-info btn-sm" type="button" [attr.photography-type-name]="imagePhotographyTypeData.name" (click)="changePhotographyTypeDescription($event)">
                            {{ 'ADMINPANEL.CHANGEPHOTOGRAPHYTYPEDESCRIPTIONBUTTON' | translate }}
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<ng-template #appModal></ng-template>
<div class="text-bg-secondary position-absolute top-50 start-50 translate-middle p-3 rounded w-75"
    [ngClass]="{ 'visually-hidden': !progressBarVisible }"
>
    <span class="fw-semibold">{{ 'PROGRESSBAR.TITLE' | translate }}</span>
    <ngb-progressbar [showValue]="true" type="primary" [value]="progressBarValue" [max]="100" height="1.5rem" class="mt-3 w-100"></ngb-progressbar>
</div>